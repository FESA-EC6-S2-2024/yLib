<!-- userForm.html -->
<div xmlns:th="http://www.thymeleaf.org"
     th:fragment="userForm(actionUrl, buttonText)">
  <form th:action="${actionUrl}" th:object="${user}" method="post">
    <!-- Nome -->
    <div class="mb-4">
      <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
      <input type="text" th:field="*{name}" id="name"
             class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm" required />
      <p class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Name error</p>
    </div>

    <!-- E-mail -->
    <div class="mb-4">
      <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
      <input type="email" th:field="*{email}" id="email"
             class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm" required />
      <p class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Email error</p>
    </div>

    <!-- Senha -->
    <div class="mb-4">
      <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
      <input type="password" th:field="*{password}" id="password"
             class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm" required />
      <p class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">Password error</p>
    </div>

    <!-- Tipo de Usuário -->
    <div class="mb-4">
      <label for="userType" class="block text-sm font-medium text-gray-700">User Type</label>
      <select th:field="*{userType}" id="userType"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm">
        <option th:each="type : ${userTypes}" th:value="${type}" th:text="${type}">User Type</option>
      </select>
      <p class="text-red-500 text-xs mt-1" th:if="${#fields.hasErrors('userType')}" th:errors="*{userType}">User type error</p>
    </div>

    <!-- Botão de Enviar -->
    <div class="flex justify-end mt-6">
      <button type="submit" class="w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-600 font-bold">
        <span th:text="${buttonText}">Submit</span>
      </button>
    </div>

    <!-- Mensagem de erro global -->
    <div th:if="${#fields.hasGlobalErrors()}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4">
      <p th:each="err : ${#fields.globalErrors()}" th:text="${err}">An unexpected error occurred. Please try again.</p>
    </div>
  </form>
</div>
